<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b0b0b"/>
  <title>Module Quiz • MBCC FinternetOps Training</title>
  <meta name="description" content="Enterprise-grade module quizzes for MBCC FinternetOps partner certification. Pass 80%+ to proceed." />
  <link rel="canonical" href="https://finternetops.moecommunitycloud.com/training/modules/quiz.html" />
  <meta property="og:title" content="Module Quiz • MBCC FinternetOps Training" />
  <meta property="og:description" content="Scenario-based quizzes that enforce enterprise controls, evidence, and operating maturity." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://finternetops.moecommunitycloud.com/training/modules/quiz.html" />
  <meta property="og:image" content="https://finternetops.moecommunitycloud.com/assets/images/training-og.jpg" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="preload" href="../assets/css/styles.css" as="style" />
  <link rel="stylesheet" href="../assets/css/styles.css" />
  <style>
    .qblock{border:1px solid rgba(212,175,55,.18); background:rgba(0,0,0,.18); border-radius:16px; padding:12px 14px;}
    .qblock b{display:block; margin-bottom:6px;}
    .opt{display:flex; gap:10px; align-items:flex-start; color: var(--muted); font-weight:800; cursor:pointer;}
    .opt input{margin-top:3px;}
    .rationale{margin-top:10px; border-top:1px solid rgba(212,175,55,.14); padding-top:10px; color: rgba(247,243,233,.80); font-weight:800; display:none;}
    .rationale.good{color: rgba(164,255,205,.92);}
    .rationale.bad{color: rgba(255,180,180,.92);}
    .lockedNote{display:none; margin-top:12px; border:1px solid rgba(193,18,31,.28); background: rgba(193,18,31,.08); border-radius:16px; padding:12px 14px;}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="container">
      <div class="nav">
        <div class="brand">
          <span class="brandMark" aria-hidden="true"></span>
          <div>
            <div>FinternetOps Training</div>
            <small>Modules • Funnel → Certification</small>
          </div>
        </div>
        <nav class="navlinks" aria-label="Training navigation">
          <a href="../index.html">Portal</a>
          <a href="../tracks.html">Tracks</a>
          <a href="../path.html">Path</a>
          <a class="active" href="index.html">Modules</a>
          <a href="../certification.html">Certification</a>
          <a href="../../agents.html">Agents</a>
          <a href="../../playbooks.html">Playbooks</a>
          <a href="../../index.html">Home</a>
        </nav>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="hrow">
        <div>
          <span class="pill red">Enterprise Quiz</span>
          <h1 id="quizTitle">Module Quiz</h1>
          <p class="sub" id="quizSub">Scenario-based questions. Pass <b>80%+</b> to unlock completion.</p>
          <div class="btnrow">
            <a class="btn ghost" href="index.html">← Back to Modules</a>
            <a class="btn" href="../path.html" data-requires-track>Back to Path</a>
          </div>
          <div class="lockedNote" id="lockedNote">
            <b>Quiz locked</b>
            Select a track first (Operator / Consultant / Sales). Then open the module page and come back.
          </div>
        </div>
        <aside class="kpis">
          <h2 style="margin:0 0 10px">Quiz status</h2>
          <div class="k"><div class="l">Module</div><div class="v" id="modId">—</div></div>
          <div class="k"><div class="l">Pass mark</div><div class="v">80%</div></div>
          <div class="k"><div class="l">Track</div><div class="v" data-track-name>—</div></div>
        </aside>
      </div>
    </section>

    <section class="section">
      <div class="card" style="grid-column: span 12">
        <span class="pill">Questions</span>

        <form id="quizForm" style="margin-top:12px; display:grid; gap:12px"></form>

        <div class="btnrow" style="margin-top:14px">
          <button class="btn primary" type="submit" form="quizForm">Submit Quiz</button>
          <a class="btn" id="backToModule" href="m1.html">Back to Module</a>
        </div>

        <div id="result" style="margin-top:14px; display:none; border:1px solid rgba(212,175,55,.22); border-radius:16px; padding:12px 14px; background:rgba(0,0,0,.18)">
          <b>Result:</b> <span id="scoreText"></span>
          <div style="margin-top:6px; color:var(--muted)" id="resultHint"></div>
        </div>
      </div>
    </section>

    <div class="footer">© 2026 MBCC FinternetOps™ • Scenario quizzes gate certification.</div>
  </main>

  <script src="../assets/js/app.js"></script>
  <script src="quiz-bank.js"></script>

  <script>
    // Fallback if app.js isn't available
    (function(){
      if(window.MBCC) return;
      const KEY = "mbcc_training_v2";
      const def = { track:"", modules:{m1:false,m2:false,m3:false,m4:false,m5:false,m6:false,m7:false,m8:false},
                    quizzes:{m1:false,m2:false,m3:false,m4:false,m5:false,m6:false,m7:false,m8:false}, capstone:false, examScore:null, certified:false };
      function load(){ try{ const r=localStorage.getItem(KEY); if(!r) return JSON.parse(JSON.stringify(def));
        const p=JSON.parse(r); return Object.assign({}, def, p, {modules:Object.assign({}, def.modules, p.modules||{}), quizzes:Object.assign({}, def.quizzes, p.quizzes||{})}); }catch(e){ return JSON.parse(JSON.stringify(def)); } }
      function save(s){ try{ localStorage.setItem(KEY, JSON.stringify(s)); }catch(e){} }
      function qs(n){ return new URLSearchParams(location.search).get(n); }
      function markQuiz(mid, done){ const s=load(); if(s.quizzes && (mid in s.quizzes)) s.quizzes[mid]=!!done; save(s); return s; }
      function prettyTrack(t){ if(t==="operator") return "Operator"; if(t==="consultant") return "Consultant"; if(t==="sales") return "Sales/Partner"; return "—"; }
      window.MBCC = {load,save,qs,markQuiz,prettyTrack};
    })();

    function el(tag, attrs, children){
      const n=document.createElement(tag);
      if(attrs){ Object.keys(attrs).forEach(k=>{ if(k==="class") n.className=attrs[k]; else n.setAttribute(k, attrs[k]); }); }
      (children||[]).forEach(c=>{ if(typeof c==="string") n.appendChild(document.createTextNode(c)); else n.appendChild(c); });
      return n;
    }

    document.addEventListener("DOMContentLoaded", function(){
      const m = ((MBCC.qs && MBCC.qs("m")) || (new URLSearchParams(location.search).get("m")) || "m1").toLowerCase();
      const bank = (window.QUIZ_BANK && window.QUIZ_BANK[m]) ? window.QUIZ_BANK[m] : (window.QUIZ_BANK ? window.QUIZ_BANK["m1"] : []);
      const state = MBCC.load ? MBCC.load() : {track:""};

      document.getElementById("modId").textContent = m.toUpperCase();
      document.getElementById("quizTitle").textContent = "Quiz • " + m.toUpperCase();
      document.getElementById("backToModule").href = m + ".html";

      // Track display
      document.querySelectorAll("[data-track-name]").forEach(x=> x.textContent = (MBCC.prettyTrack ? MBCC.prettyTrack(state.track) : (state.track||"—")));

      // Hard gate: must have track selected
      const locked = !state.track;
      const lockedNote = document.getElementById("lockedNote");
      if(locked){
        lockedNote.style.display = "block";
        document.querySelector('button[type="submit"]').disabled = true;
        document.querySelector('button[type="submit"]').style.opacity = ".55";
      }

      const form = document.getElementById("quizForm");
      form.innerHTML = "";

      bank.forEach((qq, idx)=>{
        const block = el("div", {class:"qblock"});
        block.appendChild(el("b", null, [(idx+1)+". "+qq.q]));
        const opts = el("div", {style:"display:grid; gap:8px; margin-top:10px;"});
        qq.options.forEach((ans, aidx)=>{
          const id = `q${idx}_${aidx}`;
          const label = el("label", {for:id, class:"opt"});
          const input = el("input", {type:"radio", name:"q"+idx, id:id, value:String(aidx), required:"required"});
          label.appendChild(input);
          label.appendChild(el("span", null, [ans]));
          opts.appendChild(label);
        });
        block.appendChild(opts);
        const rat = el("div", {class:"rationale", id:"rat_"+idx}, []);
        block.appendChild(rat);
        form.appendChild(block);
      });

      form.addEventListener("submit", function(e){
        e.preventDefault();
        if(locked) return;

        const fd = new FormData(form);
        let correct = 0;

        bank.forEach((qq, idx)=>{
          const val = fd.get("q"+idx);
          const rat = document.getElementById("rat_"+idx);
          if(!rat) return;
          rat.style.display = "block";

          const isCorrect = (val !== null) && (parseInt(val,10) === qq.correct);
          if(isCorrect) correct += 1;

          rat.classList.remove("good","bad");
          rat.classList.add(isCorrect ? "good" : "bad");
          const chosen = (val === null) ? "(no answer)" : qq.options[parseInt(val,10)];
          const correctTxt = qq.options[qq.correct];
          rat.textContent = (isCorrect ? "✓ Correct. " : "✕ Not correct. ") + "Correct answer: " + correctTxt + " — " + qq.rationale;
        });

        const score = Math.round((correct / bank.length) * 100);
        const result = document.getElementById("result");
        result.style.display = "block";
        document.getElementById("scoreText").textContent = score + "% (" + correct + "/" + bank.length + ")";

        if(score >= 80){
          if(MBCC.markQuiz) MBCC.markQuiz(m, true);
          document.getElementById("resultHint").textContent = "Passed. Your path is updated. Return to the module and then continue your checklist.";
        }else{
          if(MBCC.markQuiz) MBCC.markQuiz(m, false);
          document.getElementById("resultHint").textContent = "Not passed. Review the module and retry. Enterprise standard is 80%+.";
        }

        result.scrollIntoView({behavior:"smooth", block:"start"});
      });
    });
  </script>
</body>
</html>
